# 形态学操作

[TOC]

## 1. 概述

数学形态学表示以形态为基础，对于图像进行分析的数学工具。基本思想是利用具有一定形态的**结构元素**去度量和提取图相对应形状，以达到对图像分析以及识别的目的。**通过对于图像中适合放入结构的位置做标记，就可以得到关于图像的结构信息，这些信息与结构元素的尺寸和形状有关，构造不同的结构元素就可以完成不同的图像分析。**

+ 膨胀
+ 腐蚀
+ 开操作
+ 闭操作

### 1.1 集合关系

若A, B为R^2的子集，A为物体区域，B为结构元素，则B对于A有三种关系:

+ B包含于A $B \subset A$
+ B击中A   $B \cap A \;!= \emptyset $
+ B击不中A $B \cap A = \emptyset $ 

## 2. 膨胀（Dilation）

A和B两个集合，A被B膨胀定义为**B的反射进行平移，与A的交集不为空，则B的中心点的像素值被置为1，否则置为0** 

+ 反射：一个集合相对于原点自身的映像

相当于利用模板B对于A进行一次滤波加法。膨胀会增长或者增粗二值图像中的物体，粗话的宽度由所用的结构元控制。

优点：可以在一个二值图像中直接得到结果，可与低通滤波方法对比

## 3. 腐蚀（Erosion）

B进行平移后，包含于A则保留A中B所在位置中心的像素值置为1，否则置为0。相当于使用模板B对于集合A做了一次滤波式减法。会缩小或者细化二值图像的物体。

可以使用腐蚀的方法去掉不同粗细的区域。使用腐蚀消除图像的细节部分，产生滤波器作用。

## 4. 开操作（Opening）

使用结构元素B对于二值图像A进行开操作，定义为:

先用B对于A进行腐蚀，再用B对于结果膨胀

+ 在不改变**形状**的前提下，使图像的轮廓变得光滑
+ 断开狭窄的间断
+ 消除细的突出物

可以看作结构元素B在A中平移，所能达到的A的边界的最远点。**所以会缺失一些角点**

## 5. 闭操作（Closing）

先用B对A进行膨胀，再用B对结果进行腐蚀。

+ 在不明显改变面积的前提下，使图像的轮廓变得光滑
+ 弥合狭窄的间断以及细长的鸿沟
+ 消除小的孔洞
+ 填补轮廓线中的裂痕

可以看作结构元素B在A的边界外部平移，可以达到的边界最远点。

![example](http://media.innohub.top/190524-oc.png)

![性质](http://media.innohub.top/190524-per.png)

**先开后闭，可以构成噪声滤波器。开操作使得图片变化很大，闭操作可以保留原有特征**

## 6. 击中击不中变换

为了在一个区域A中查找一个特定的结构元素D。设D被包含在一个特定的小窗口W中，与W有关的局部背景为W-D:

1. 先使用D对A进行腐蚀，得到C
2. 再使用W-D对A的补集进行腐蚀，得到E
3. C和E求交集，得到的非空，就是D在区域A中的原点位置，D找到了在A中的匹配

## 7. 形态学应用

### 7.1 边界提取

先用结构元素B对于A进行腐蚀，然后用A减去腐蚀后的结果，可以得到物体的内边缘。

### 7.2 区域填充

$$
X_k = (X_{k-1} \bigoplus B) \cap A^c
$$

使用结构元素B对于区域A进行填充，$A^c$为A的补集，每一次迭代都是用B对于上一步的结果进行膨胀，并与A的补集取交集，最后得到的是A内孔洞的填充。

### 7.4 连通分量的提取

令Y是包含于一个集合A中的连通分量，如果Y中的一个点P是已知的，可以使用以下方法生成Y的所有元素:
$$
X_k = (X_{k-1} \bigoplus B) \cap A
$$
一直迭代到收敛

### 7.5 凸壳方法求凸包

//todo


# 目标的表示与描述

[TOC]

## 1. 表达与描述

对于目标分割得到的区域需要有合适的数据结构进行表达，并采用合适的形式描述其特性。好的目标表示方法应该具有**节省存储空间、易于特征计算**的特点。图像中的区域可以使用两种方式描述:

+ 内部：组成区域的像素集合 -- 关心区域的反射性质：灰度、颜色、纹理
+ 外部：组成边缘的像素集合 -- 关心区域形状

对于目标的描述借助于描述符，好的描述符在尽可能区分不同目标的基础上，对于平移、旋转、尺度变化不敏感。可以分为对于**边界、区域**的描述。

+ 边界描述：几何关系
+ 区域描述： 几何、灰度、纹理
+ 关系描述：边界与边界、区域与区域

## 2. 基于边界的表达

### 2.1 边界跟随算法

检测二值图像中的一个特定区域的边界.

1.首先给定边界的左上方的第一个为1的点记为b0,记c0为b0的西邻居，作为背景点

2.从c0开始，对于b0的8邻域进行顺时针检查，第一个为1的像素点记为b,检查过程中b的前一个点记为c

3.从c点开始顺时针检查b的8邻域，找到第一个1的像素点记为nk, 其前一个点记为nk-1

4.另b=nk, c = nk-1

5.重复3,4直到b==b0

### 2.2 链码

基于4,8邻域对于边缘的描述方法，默认以0°角为0，逆时针依次递增。对于同一个边界，起点选择不同，链码不同，所以需要进行链码归一化。**在链码的表达中，只有起点需要使用绝对坐标表示，其他点都可以使用连续的方向变换表示偏移量；与使用坐标相比，可以大大减小表示所需的数据量；4,8链码都是方向有限、长度固定。**

#### 起点归一化

对于任意起点得到的链码表示，可以作为一个循环序列，将这些数按照一个方向旋转，得到最小的自然数作为归一化链码。

#### 旋转不变

链码可以保持平移不变，但无法保持旋转不变，可以使用一阶差分表示，差分码不发生变化。对于得到的链码表示，相邻的值相减（按反方向），得到差分码

![chain](http://media.innohub.top/190525-chain.png)

优点：

+ 数据压缩
+ 由链码直接计算图像的参数

缺点：

+ 码串太长，噪声干扰

### 2.3 多边形近似

选择目标区域的最小凸包，作为边界近似。

### 2.4 距离为角度的函数

求出重心，然后做出距离为角度的函数。

缺点：函数过于依赖旋转以及缩放变换

改进：对于旋转，选择离重心最远的点作为起点，或者选择从中心到本特征轴最远的点作为起点

缩放：对于函数进行归一化

### 2.5 切角为弧长的函数

沿边界旋转一周，做出每一个点在切线，得到切线的角度变化曲线。

## 3. 边界描述

### 3.1 简单边界描述符

可以使用边界的长度。

+ 边界点的定义:本身属于目标区域，而其邻域点有不属于目标区域的点

+ 边界长度：水平垂直方向为单位长度，对角方向为根2长度，利用长度可以计算周长。

+ 边界直径：边界上相隔最远两点的距离，可以使用欧氏距离度量，对应的线为边界的**长轴，直径的长度和方向是有效的边界描述符**

+ 边界的短轴:与长轴垂直而且与边界相交的最长的线段

### 3.2 边界形状数

边界形状数是基于链码的，一个用链码表示的边界可以具有多个不同的一阶差分，而边界形状数是所有一阶差分最小的一个，形状数不随边界的旋转以及尺度变化而改变。每一个形状数都有一个对应的阶数，这里的阶定义为形状数序列的长度，对于闭合曲线，阶数为偶数。对于不同的目标进行识别式，可以从4阶开始，依次增加形状数的阶数，直到可以完全划分。

### 3.3 傅立叶描述子

把一个点的坐标（x,y）看做一个复数的实部以及虚部，然后利用傅里叶变换，把一个点变换为一系列的边界点：
$$
s(k) = x(k) + jy(k)
$$

$$
a(u) = \frac{1}{k}\sum_{k=0} ^{K-1}s(k)e ^{-2\pi uk/K}
$$

对应的重建公式:
$$
s(k) = \frac{1}{K} \sum _{u=0} ^{K-1} a(u)e ^{2\pi uk/K}
$$

### 3.4 统计矩

![统计矩](http://media.innohub.top/190526-ju.png)

将描述形状的任务减少到一个描述一个一维函数 边界段和特征的形状可以用矩量来量化描述。矩量的优点:

+ 对于旋转不敏感
+ 可以通过伸缩r的范围将大小正则化，使得对于大小比例不敏感
+ 实现是直接的
+ 附带了对于边界形状的物理解释

### 3.5 轮廓形状矩阵

形状矩阵可以看作描述目标轮廓的矢量，对于给定目标，这个矢量的长度是固定的，记录了轮廓上各点的相对位置。

## 4. 区域描述符

### 4.1 简单描述符

+ 面积：区域内的像素数量

+ 周长：边界的长度

+ 区域圆比例： 对于一个区域的面积为A，周长为P， 
  $$
  Rc = \frac{4\pi A}{p ^2}
  $$

表示区域与圆的近似程度，取值（0， 1）为1时是圆，pi\4时是方形

+ 区域紧实度：周长的平方与面积的比值，该值越小，越接近于圆，值越大图形越离散

### 4.2 拓扑描述子

描述一个区域内的孔洞数量H以及连通域的数量C。定义**欧拉数为E = C-H**.欧拉数的正则化:

点的数量V，边的数量Q，面的数量F：

E = C - H = V - Q + F

### 4.3 纹理描述子

可以从灰度直方图计算的统计矩作为纹理特征的描述：

+ 二阶矩：方差  描述平滑程度
+ 三阶矩：描述偏斜程度
+ 四阶矩：描述平坦程度

![text](http://media.innohub.top/190526-text.png)

#### 区域不变量

区域矩：f(x,y)的p+q阶矩可以定义为:
$$
m_{pq} = \sum_x \sum_y x^p y^q f(x,y)
$$
可以证明m与f一一对应。

中心距：
$$
M_{pq} = \sum_x \sum _y(x- \hat{x})^p (y - \hat{y})^qf(x,y)
$$
其中:
$$
\hat{x} = m_{10} / m_{00} \\ \hat{y} = m_{01} / m_{00}
$$
归一化：
$$
N_{pq} = \frac{M_{qp}}{M_{00} ^{\lambda}}  \\ \lambda = (p+q) /2 +1
$$
根据归一化的三个二阶中心距以及两个三阶中心距，可以得到7个**对于平移，旋转，尺度变换保持不变的**不变矩：

![不变矩](http://media.innohub.top/190526-bu.png)

### 4.4 主要成分描述子

尽可能保持信息的同时，减少图像矢量的维度。对于一个K维的图像，每一个点可以用一个K维向量描述，其均值为：
$$
m_x = \frac{1}{K} \sum x_k
$$
协方差矩阵:
$$
C_x = \frac{1}{K}\sum_{k=1} ^{K}x_k x_K^T - m_xm_x^T
$$
![霍特林变换](http://media.innohub.top/190526-htl.png)

PCA步骤：

+ 输入高维向量的协方差矩阵
+ 计算该矩阵的特征值以及特征向量
+ 将特征向量按照对应的特征值进行排序
+ 选出较大特征值对应的特征向量
+ 将原始信号投影到所选择的特征向量构成的特征空间，得到一个低维信号

####  霍特林变换

利用高维向量得到的特征矩阵A，可以使用霍特林变换由高维x向低维y变换：
$$
y = A(x - m_x)
$$
其中矩阵A第一行为最大特征值对应的特征向量，第二行为第二大特征值对应的特征向量

### 4.5 四叉树

//todo
# 图像的局部特征

[TOC]

## 1. 局部特征的使用

特征选取以及提取的基本任务是从共夺得特征中找到最有效的特征，通常将图像的多种特征组合为一个n维向量，用于表示该图像，一个图像就可以表示为n维空间中的一个点，图像识别就是找到一个n维空间的划分，使该类图像与其他图像在空间上分开。

## 2. 边缘检测

### 2.1 坎尼算子(Canny)

把边缘检测问题转化为单位函数的极大值问题来考虑，使用高斯微分，找到梯度的方向以及尺度大小。一个好的边缘检测算子应该具有以下指标:

+  低失误率，尽量少的将边缘丢失或者误判
+ 高位置精度，检测到的边缘应该在真正的边缘上
+ 单像素边缘，每一个边缘有唯一响应，得到的边缘宽度为单像素

对于单像素边缘，可以使用非极大值抑制，沿着梯度的方向，选取单个最大值作为边缘的像素点。

坎尼算子的工作步骤:

1. 在空间进行低通滤波，使用高斯滤波器进行平滑操作，减轻噪声的影响
2. 使用一阶微分算子检测滤波图像中的灰度的方向以及大小，可以使用类似Sobel的边缘检测算子
3. 非最大值抑制，泳衣细化梯度检测得到的边缘。常用方法是比较一个邻域内的像素点的灰度值，如果沿着梯度方向，相邻像素值大于中心像素值，则将其置为0；否则就是一个局部最大，可以保留。
4. 滞后阈值化：选取两个阈值，首先标记大于高阈值的为边缘像素，然后再对与这些边缘像素相连的像素使用低阈值：如果大于低阈值，也可以确定为边缘。**该方法可以减弱噪声在最终边缘图像上的影响，也可以避免由于阈值过低造成的虚假边缘或者阈值过高造成的边缘丢失**

## 3. 边界闭合

作为边缘检测的后处理：

+ 由于噪声的存在，各种算子得到的边缘常常是孤立的、分小端存在的
+ 对于同一个目标，边缘应该是封闭的，所以需要将边缘像素连接起来

闭合、接近、连续性、凸性是衡量边缘的重要属性。使用梯度算子得到两个方向上的梯度$G_x, G_y$,可以得到**梯度幅度**以及**梯度方向**。幅度值的度量可以使用$l2, l1, l_{\infty}$ 范数，方向可以由:
$$
\phi(x, y) = arctan(G_y \ G_x)
$$
根据边缘在**梯度幅度以及梯度方向的相似性可以将不同的边缘连接起来，即如果两个指标的差异都小于某一个特定阈值既可以进行连接。**

## 4. 边界细化

对于检测得到的边缘往往比较宽，通常需要进行细化，基本的方法可以基于邻域：

+ 如果邻域中有5个以上可见像素，那么一定有宽度超过1的边缘
+ 如果邻域中的可见像素不大于3个,那么就只包含单点宽度的线条

### 4.1 模板方法

进行非极大值抑制时需要选择与边界垂直的方向，也就是梯度方向，一般考虑4个梯度方向:

1. 水平方向
2. 垂直方向
3. 左对角
4. 右对角

注意每一个方向都有前后格22.5°的偏差范围。

![non](http://media.innohub.top/190524-non.png)

### 4.2 插值方法

找出一个像素点上最能吻合在梯度方向上的两侧的像素值